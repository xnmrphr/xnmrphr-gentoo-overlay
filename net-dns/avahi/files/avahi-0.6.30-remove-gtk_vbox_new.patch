*** avahi-ui/avahi-ui.c	2011-10-01 13:22:26.261318589 -0700
--- avahi-ui/avahi-ui.c.patched	2011-10-01 13:56:43.358090412 -0700
***************
*** 990,997 ****
  #if !GTK_CHECK_VERSION(2,21,8)
      gtk_dialog_set_has_separator(GTK_DIALOG(p->domain_dialog), FALSE);
  #endif
! 
      vbox = gtk_vbox_new(FALSE, 8);
      gtk_container_set_border_width(GTK_CONTAINER(vbox), 8);
      gtk_box_pack_start(GTK_BOX(gtk_dialog_get_content_area(GTK_DIALOG(p->domain_dialog))), vbox, TRUE, TRUE, 0);
  
--- 990,1000 ----
  #if !GTK_CHECK_VERSION(2,21,8)
      gtk_dialog_set_has_separator(GTK_DIALOG(p->domain_dialog), FALSE);
  #endif
! #if GTK_CHECK_VERSION(3,0,0)
!     vbox = gtk_box_new(GTK_ORIENTATION_VERTICAL, 8);
! #else
      vbox = gtk_vbox_new(FALSE, 8);
+ #endif
      gtk_container_set_border_width(GTK_CONTAINER(vbox), 8);
      gtk_box_pack_start(GTK_BOX(gtk_dialog_get_content_area(GTK_DIALOG(p->domain_dialog))), vbox, TRUE, TRUE, 0);
  
***************
*** 1002,1008 ****
--- 1005,1015 ----
      g_signal_connect(p->domain_entry, "changed", G_CALLBACK(domain_entry_changed_callback), d);
      gtk_box_pack_start(GTK_BOX(vbox), p->domain_entry, FALSE, FALSE, 0);
  
+ #if GTK_CHECK_VERSION(3,0,0)
+     vbox2 = gtk_box_new(GTK_ORIENTATION_VERTICAL, 8);
+ #else
      vbox2 = gtk_vbox_new(FALSE, 8);
+ #endif
      gtk_box_pack_start(GTK_BOX(vbox), vbox2, TRUE, TRUE, 0);
  
      scrolled_window = gtk_scrolled_window_new(NULL, NULL);
***************
*** 1113,1119 ****
--- 1120,1130 ----
  
      gtk_container_set_border_width(GTK_CONTAINER(d), 5);
  
+ #if GTK_CHECK_VERSION(3,0,0)
+     vbox = gtk_box_new(GTK_ORIENTATION_VERTICAL, 8);
+ #else
      vbox = gtk_vbox_new(FALSE, 8);
+ #endif
      gtk_container_set_border_width(GTK_CONTAINER(vbox), 8);
      gtk_box_pack_start(GTK_BOX(gtk_dialog_get_content_area(GTK_DIALOG(d))), vbox, TRUE, TRUE, 0);
  
***************
*** 1123,1129 ****
--- 1134,1144 ----
      gtk_box_pack_start(GTK_BOX(vbox), p->domain_label, FALSE, FALSE, 0);
  
  
+ #if GTK_CHECK_VERSION(3,0,0)
+     vbox2 = gtk_box_new(GTK_ORIENTATION_VERTICAL, 8);
+ #else
      vbox2 = gtk_vbox_new(FALSE, 8);
+ #endif
      gtk_box_pack_start(GTK_BOX(vbox), vbox2, TRUE, TRUE, 0);
  
      scrolled_window = gtk_scrolled_window_new(NULL, NULL);

